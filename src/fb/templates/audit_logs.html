{% extends "base.html" %}
{% block content %}

<div class="page-header">
  <h1 class="page-title">Audit Logs</h1>
  <p class="page-subtitle">Append-only log of all system actions</p>
</div>

<div class="card">
  <strong>{{ logs|length }}</strong> log entry(ies)
</div>

{% if logs|length == 0 %}
<div class="card empty-state">
  <div style="font-size: 2rem; margin-bottom: 1rem;">ðŸ“‹</div>
  <div>No audit logs yet.</div>
</div>
{% else %}
<table>
  <thead>
    <tr>
      <th>Timestamp</th>
      <th>Actor</th>
      <th>Action</th>
      <th>Target</th>
      <th>Result</th>
      <th>Details</th>
    </tr>
  </thead>
  <tbody>
    {% for log in logs %}
    <tr>
      <td><code>{{ log.timestamp }}</code></td>
      <td>{{ log.actor }}</td>
      <td><code>{{ log.action }}</code></td>
      <td><code>{{ log.target }}</code></td>
      <td>
        {% if log.ok %}
          <span class="status-badge status-success">Success</span>
        {% else %}
          <span class="status-badge status-failed">Failed</span>
        {% endif %}
      </td>
      <td class="muted" style="max-width: 300px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
        {{ log.details }}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}

{% endblock %}


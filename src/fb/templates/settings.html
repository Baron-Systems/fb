{% extends "base.html" %}
{% block content %}

<h3>Settings</h3>

<div class="card">
  <h4>Backup Schedule</h4>
  <form method="post" action="/api/settings/schedule">
    <div style="margin-bottom: 1rem;">
      <label for="backup_hour"><strong>Daily Backup Time (UTC):</strong></label><br/>
      <input type="number" id="backup_hour" name="hour" min="0" max="23" value="{{ schedule_hour }}" required style="width: 80px; padding: 0.5rem; margin-top: 0.25rem; border: 1px solid #ddd; border-radius: 4px;" />
      <span style="margin: 0 0.5rem;">:</span>
      <input type="number" id="backup_minute" name="minute" min="0" max="59" value="{{ schedule_minute }}" required style="width: 80px; padding: 0.5rem; margin-top: 0.25rem; border: 1px solid #ddd; border-radius: 4px;" />
      <div class="muted">Default: 02:00 UTC</div>
    </div>
    <input type="hidden" name="csrf_token" value="{{ csrf }}" />
    <button type="submit">Save Schedule</button>
  </form>
</div>

<div class="card">
  <h4>Retention Policy</h4>
  <form method="post" action="/api/settings/retention">
    <div style="margin-bottom: 1rem;">
      <label for="keep_backups"><strong>Keep Last N Backups:</strong></label><br/>
      <input type="number" id="keep_backups" name="keep" min="1" max="365" value="{{ retention_keep }}" required style="width: 100px; padding: 0.5rem; margin-top: 0.25rem; border: 1px solid #ddd; border-radius: 4px;" />
      <div class="muted">Default: 14 backups per site</div>
    </div>
    <input type="hidden" name="csrf_token" value="{{ csrf }}" />
    <button type="submit">Save Retention</button>
  </form>
</div>

<div class="card">
  <h4>Backup Storage</h4>
  <div><strong>Backup Root:</strong> <code>{{ backup_root }}</code></div>
  <div class="muted">All backups are stored under this directory</div>
</div>

<div class="card">
  <h4>Database</h4>
  <div><strong>Database Path:</strong> <code>{{ db_path }}</code></div>
  <div class="muted">SQLite database file location</div>
</div>

<div class="row">
  <a href="/"><button type="button">Back</button></a>
</div>

{% endblock %}

